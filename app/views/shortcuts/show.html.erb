<div class="flex justify-between items-center bg-white sticky z-40 top-0 p-2 shadow-sm md:hidden">
    <%= link_to user_path(@shortcut.user), class: "flex items-center " do %>
        <div class="size-6">
            <% if @shortcut.user.avatar.present? %>
                <%= image_tag @shortcut.user.avatar, class: "rounded-full object-cover aspect-1/1" %>
            <% else %>
                <%= image_tag "user_default_icon.png", class: "rounded-full object-cover aspect-1/1" %>
            <% end %>
        </div>
        <p class="pl-1 text-base"><%= @shortcut.user.name %></p>
    <% end %>
    <% if user_signed_in? && @shortcut.user != current_user %>
        <%= render partial: "relationships/btn", locals: { user: @shortcut.user } %>
    <% end %>
</div>
<div class="flex justify-start items-center bg-zinc-100 inset-shadow-sm">
    <div class="breadcrumbs text-xs px-3">
        <ul>
            <li>
                <%= link_to root_path do %>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-3"><path d="M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z" /><path d="m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z" /></svg>
                    ホーム
                <% end %>
            </li>
            <li>
                <%= link_to shortcuts_path do %>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-3"><path d="M10.5 18.75a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3Z" /><path fill-rule="evenodd" d="M8.625.75A3.375 3.375 0 0 0 5.25 4.125v15.75a3.375 3.375 0 0 0 3.375 3.375h6.75a3.375 3.375 0 0 0 3.375-3.375V4.125A3.375 3.375 0 0 0 15.375.75h-6.75ZM7.5 4.125C7.5 3.504 8.004 3 8.625 3H9.75v.375c0 .621.504 1.125 1.125 1.125h2.25c.621 0 1.125-.504 1.125-1.125V3h1.125c.621 0 1.125.504 1.125 1.125v15.75c0 .621-.504 1.125-1.125 1.125h-6.75A1.125 1.125 0 0 1 7.5 19.875V4.125Z" clip-rule="evenodd" /></svg>
                    ショートカット一覧
                <% end %>
            </li>
            <li>
                <span>
                    <%= @shortcut.title %>
                </span>
            </li>
        </ul>
    </div>
</div>

<div class="w-full flex flex-col items-center">
    <div class="w-full flex flex-wrap md:max-w-3xl md:mt-4">
        <div class="w-full md:w-2/3 md:order-1 bg-teal-50 md:bg-white mb-2 max-md:shadow-[0_-1px_2px_rgba(0,0,0,0.1)]">
            <div class="flex justify-end text-xs text-zinc-400 text-right p-2">
                <p class="mr-2">投稿日：<%= l @shortcut.created_at %></p>
                <p>更新日：<%= l @shortcut.updated_at %></p>
            </div>
            <div class="flex justify-center my-5">
                <div class="col-span-1 aspect-3/4 h-25 flex-none flex justify-center items-center rounded-s-lg rounded-e-sm shadow-md relative bg-teal-500">
                    <div class="h-full w-full absolute left-0 rounded-s-lg rounded-e-sm bg-gradient-to-r from-white/0 from-0% via-white/50 via-4% to-white/10 to-10% hover:bg-zinc-100 active:bg-zinc-100/50"></div>
                    <%= image_tag "shortcuts/#{@shortcut.icon}.svg", class: "size-8" %>
                </div>
            </div>
            <div class="w-full flex justify-center my-5 px-5">
                <h2 class="w-full text-zinc-700 text-xl font-bold wrap-break-word"><%= @shortcut.title %></h2>
            </div>
        </div>

        <div class="w-full md:w-2/3 md:order-3 bg-white p-4 mb-2">
            <div class="bg-zinc-200 py-4 px-3 rounded-lg text-sm">
                <p><%= @shortcut.description %></p>
            </div>
        </div>

        <div class="w-full md:w-2/3 md:order-4 flex bg-white mb-2 p-4">
            <%= render partial: "tag", collection: @shortcut.tags %>
        </div>

        <div class="w-full md:w-2/3 md:order-5 bg-white p-4 mb-2 flex justify-between">
            <div class="flex flex-col justify-center items-center w-full">
                <%= link_to @shortcut.download_url, target: :_blank, rel: "noopener noreferrer", class: "w-full btn px-1 bg-teal-500 rounded-full text-white" do %>
                    <div class="w-full flex justify-between items-center">
                        <div class="bg-white p-2 rounded-full">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="size-4 stroke-teal-500">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3" />
                            </svg>
                        </div>
                        <p>ダウンロードする</p>
                        <p></p>
                    </div>
                <% end %>
            </div>
        </div>

        <% if @shortcut.instructions.present? %>
            <div class="w-full md:w-2/3 md:order-6 bg-white mb-2 p-5">
                <div class="flex items-center mb-7">
                    <span class="block w-1 h-6 bg-teal-700 mr-2"></span>
                    <p class="text-lg font-bold">使い方</p>
                </div>
                <div class="flex flex-col gap-4 divide-y-1 divide-dotted divide-teal-500">
                    <% @shortcut.instructions.each_with_index do |instruction, index|%>
                        <div class="flex items-start gap-4 pb-4">
                            <div class="flex-none flex justify-center items-center bg-zinc-500 text-white text-sm rounded-full size-6">
                                <p><%= index + 1 %></p>
                            </div>
                            <p><%= instruction.content %></p>
                        </div>
                    <% end %>
                </div>
            </div>
        <% end %>

        <div class="w-full md:w-1/3 md:order-2 mb-2 md:pl-4 md:sticky md:top-4">
            <div class="bg-white p-4">
                <div class="flex items-center mb-7">
                        <span class="block w-1 h-6 bg-teal-700 mr-2"></span>
                        <p class="text-lg font-bold">作成者</p>
                    </div>
                <div class="flex">
                    <div class="size-20 mr-4">
                        <% if @shortcut.user.avatar.present? %>
                            <%= image_tag @shortcut.user.avatar, class: "rounded-full object-cover aspect-1/1" %>
                        <% else %>
                            <%= image_tag "user_default_icon.png", class: "rounded-full object-cover aspect-1/1" %>
                        <% end %>
                    </div>
                    <div class="flex flex-col justify-center">
                        <%= link_to user_path(@shortcut.user), class: "flex flex-col" do %>
                            <p class="text-base"><%= @shortcut.user.name %></p>
                            <p class="mb-4 pl-1 text-xs text-zinc-500">@<%= @shortcut.user.uid %></p>
                        <% end %>
                        <% if user_signed_in? && @shortcut.user != current_user %>
                            <%= render partial: "relationships/btn", locals: { user: @shortcut.user } %>
                        <% end %>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
